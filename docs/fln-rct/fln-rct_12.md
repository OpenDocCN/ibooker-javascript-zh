# 第十一章：结论

如果你已经走到这一步，感谢你加入我一起探索 React 生态系统的旅程。希望你和我一样享受这次冒险。在我们在一起的时间里，我们追求了对 React 更深入的理解，探索了它的核心原则、内部工作机制和更广泛的生态系统。假设我们已经知道如何*使用*React，我们专注于理解它的机制：它实际上是如何工作的——最终目标是我们可以在未来的工程生涯中应用的实用经验。

# 收获

现在让我们概括一些收获：

重新思考最佳实践。

有时，我们需要重新思考一切。React 引入 JSX 和虚拟 DOM 是对现状的激进改变。它挑战了已经建立的传统，迫使我们重新思考如何构建界面。挑战现状并重新想象事物如何完成的意愿是 React 哲学的标志，因此作为工程师，我们应该始终愿意挑战现状并重新思考事物的完成方式。

完全理解 JSX 的工作原理。

如果我们受限于一种编程语言——比如说，如果我们不能在 JavaScript 中使用 HTML 样式的语法——我们作为工程师有权力通过创建一种新语言来改变这一点。这就是 JSX 的作用：一种编译成 JavaScript 的新语言。现在我们完全理解了 JSX 的工作原理和一些编译器理论，我们也可以做到这一点。

约束并不是一件坏事。

约束是创新之母。React 基本上是在 Web 的约束下诞生的创新，其中读取元素的`innerWidth`会导致重新布局，不同的浏览器有不同的事件 API。这里的要点是，约束并不是一件坏事。它们迫使我们跳出固有思维，提出创造性解决方案。

声明性抽象解锁了强大的能力。

通过将 JSX 的表达与协调器分离，React 开创了一种“一次编写，随处运行”的 UI 开发方法，使我们能够使用相同的代码来渲染到 DOM、服务器，甚至原生平台。这是一个强大的能力，我们可以在自己的项目中利用这一点，考虑分离关注点并确定正确的抽象级别。

解锁强大的能力使我们能够构建更灵活、易维护的应用程序。

我们揭示了许多模式，从高阶组件到渲染属性到钩子到上下文。这些模式是我们可以用来抽象逻辑、在组件之间共享行为、更有效地管理状态的强大工具。虽然这些模式引入了复杂性，但它们也解锁了强大的能力，使我们能够构建更灵活、易维护的应用程序。此外，像 HOCs 一样，这些模式早在 React 之前就存在。我们今天正在使用哪些模式，它们将成为下一代 UI 框架的基础？我们可以发明哪些模式使我们的生活更轻松？

我们可以在我们自己的项目中利用强大的能力。

我们了解到，当我们超越浏览器，通过到服务器，一系列新的可能性会展现。我们可以在服务器上渲染我们的 React 组件，使用浏览器的原生 fetch API 加载数据，并且我们可以使用原生 HTML 表单进行用户输入。这些都是我们可以在我们自己的项目中利用的强大能力，考虑到服务器端渲染的权衡和利用 web 基础知识的好处。

改善用户体验的好处。

现在，我们可以充分利用 React 的并发特性，比如`useTransition`，通过将工作推迟到“另一个宇宙”来改善用户体验，然后在准备就绪时将更改提交到 DOM。这是我们可以在我们自己的项目中利用的强大能力，考虑到推迟工作的权衡和改善用户体验的好处。

所有这些都是用我们知道和理解的语言完成的。

我们通过创建我们自己的框架的视角深入探讨了 Next.js 和 Remix 之间的复杂性，最终认识到这一切只是一些带有服务器和其他东西的 JavaScript：我们也可以根据充足的时间和资源构建我们自己的框架。虽然我们感谢作者的工作，但我们也可以自信地说，所有这些都是用我们知道和理解的语言完成的。

向我们的用户交付大大减少的代码。

就像从浏览器到服务器的进一步扩展一样，我们了解到通过打包工具进一步扩展浏览器可以解锁全新的可能性，利用打包工具将客户端组件与服务器组件分离，并向我们的用户交付大大减少的代码。我们还能使用哪些酷炫的编译器/打包工具技巧来改善用户体验呢？

我们可以从其他框架中汲取灵感，并应用到我们自己的项目中。

我们放大视角看了一下，即使在 React 之外，每个人也在解决同样的问题：我们如何构建用户界面，既快速、响应迅速，又具有出色的开发者体验？我们从 Vue、Solid、Qwik 等框架中探索了一些思路，我们了解到可以从这些其他框架中汲取灵感，并应用到我们自己的项目中。

随着我们对 React.js 的探索画上句点，反思我们所走过的旅程并理解这个库的变革性质是至关重要的。多年来，React 的成长证明了它的适应性、韧性和社区创新精神。从通过 JSX 引入更直观的界面构建方式，到重新构想通过虚拟 DOM 实现更高效更新，React 毫无疑问在 web 开发的领域留下了不可磨灭的印记。

# 我们的时间轴

本书的初章简要介绍了 React 的核心原则。在其核心，React 的理念是构建使得网页体验更加易于接近、可扩展和可维护的组件。这些自包含的工作单元——组件、纤维、元素——封装了逻辑和 UI，使得我们能够更轻松地理解应用在扩展时的运作方式。

使用 JSX，React 提供了一种声明式的 UI 开发方式。通过将我们的界面作为应用状态的函数，我们可以轻松地理解和预测数据变化对 UI 的影响。清晰的分离和单一的真相源概念无疑改变了开发人员处理 UI 构建的方式。

随着 React 的影响力逐渐扩展，它不可避免地影响了科技行业，激发了许多平台和框架。其中最显著的受影响平台之一是苹果的 SwiftUI，这是一个用于在所有苹果设备上构建用户界面的框架。

受 React 和其他技术影响，SwiftUI 采纳了类似的理念。与 iOS 开发中经常见到的经典 MVC（Model-View-Controller）设计模式不同，SwiftUI 鼓励开发人员使用称为视图的较小、组件式结构构建 UI。SwiftUI 中的每个视图都是一个自包含的单元，类似于 React 组件。

随着 UI 框架的不断发展，思想的跨越污染将继续存在。一个平台的创新可以激发另一个平台的改进，从而导致更丰富、更具连贯性的开发格局。React 对 SwiftUI 及更广泛生态系统的影响是这种共生关系的一个典型例子，它为科技界的未来合作和灵感奠定了基础。

# 魔术背后的机制

虚拟 DOM 和 Fiber 协调器是我们深入探讨的一些更技术性的主题。这些概念是 React 高效和高性能更新的齿轮和滑轮。虚拟 DOM 充当我们应用状态与实际 DOM 之间的中介。通过比较差异和批量更新，React 确保以最小的工作量保持 UI 与状态同步。

另一方面，协调器是这个操作的大脑。它决定何时以及如何更新组件，优化性能并确保一致性。我们探索了协调器的内部工作原理，学习了不同阶段的工作及其背后的工作。我们还看到协调器如何优先处理工作，确保首先处理最重要的更新。

# 高级冒险

探索高级领域时，我们研究了 React 中的高级模式。这些模式，如高阶组件、渲染属性、钩子和上下文，允许开发人员抽象逻辑、在组件之间共享行为，并更有效地管理状态。虽然这些模式引入了复杂性，但它们也解锁了强大的能力，使我们能够构建更灵活、可维护的应用程序。

服务器端 React 和并发 React 带领我们穿越了 React 应用程序的演变过程。随着对快速初始加载和交互体验需求的增加，利用服务器和异步操作变得至关重要。这些技术确保我们的应用程序保持灵敏、响应迅速和以用户为中心。

我们探讨了`react-dom`的服务器端，包括诸如`renderToString`和`renderToPipeableStream`等函数，概述了每种方法的权衡。我们还探讨了 React 的一些异步能力，例如`useSyncExternalStore`和`useTransition`，以及它们如何用于改善用户体验。

最后，我们涉足了 React Server Components，这是 React 生态系统中较新的增加，代表了该库持续的演进。通过仅在服务器上渲染组件，我们可以创建更高效的应用程序，优化性能和用户体验。

在最后的章节中，我们探索了围绕 React 的更广泛生态系统，包括各种框架和替代库。React 的成功催生了大量工具、框架和替代品，每个都带来了其自身的优势和折衷。

React 自诞生以来已经走过了漫长的道路，其旅程反映了不断发展的 Web 开发世界。当你阅读本书时，你不仅学习了一个库，还深入了解了驱动现代 Web 开发的范式和原则。

# 保持更新

跟上不断发展的 JavaScript 生态系统，包括围绕 React 构建的许多框架，可能会感觉像一项艰巨的任务。每年都会推出许多新工具和库，每个都具有其独特的功能、优点和折衷。作为开发人员，要做出关于未来项目使用合适框架的明智决策，不仅需要熟悉生态系统的当前状态，还需要前瞻性地理解这些工具的发展轨迹及其在 Web 开发更广泛背景中的位置。

有几种策略可以保持更新，并持续为未来项目选择合适的 React 框架做出明智决策：

关注可信的消息来源。

JavaScript 生态系统发展迅速。跟随提供高质量内容和定期更新的可信源至关重要，这些内容包括博客、YouTube 频道、新闻稿、播客或在线社区。例如，关注 Next.js 和 Remix 的官方博客和 Twitter 账号可以获取它们即将推出的功能、改进和整体路线图。

我们推荐的一些资源包括：

+   React 文档位于 [react.dev](https://react.dev)

+   React 核心成员在𝕏（原 Twitter），包括但不限于：

    +   *@sophiebits*

    +   *@sebmarkbage*

    +   *@zmofei*

    +   *@acdlite*

    +   *@rickhanlonii*

    +   *@dan_abramov2*

+   React 社区创作者在𝕏（包括但不限于）：

    +   *@kadikraman*

    +   *@kentcdodds*

    +   *@shaundai*

    +   *@Saurav_Varma*

    +   *@rachelnabors*

参与相关社区。

Reddit、Stack Overflow、GitHub 或各种 Discord 和 Slack 群体等在线社区是关注新兴趋势和工具的绝佳场所。社区成员经常分享他们对不同框架的经验，这对于在不同工具之间做出决策时提供了有用的视角。

一些有用的社区资源包括：

+   React subreddit

+   Reactiflux Discord 服务器

+   bytes.dev 新闻简报

+   React Roundup 播客

+   “This Week in React” 新闻简报

参加会议和聚会。

参加会议和聚会有助于了解 JavaScript 和 React 生态系统的最新发展和最佳实践。即使无法亲临现场，许多活动都提供在线直播或录制的讲座以供后续观看。

一些很棒的 React 会议包括：

+   React Brussels

+   React Alicante

+   React India

+   React Day Verona

尝试不同的框架。

没有什么比实际操作更能帮助理解工具的了。花些时间用不同的框架构建小项目或原型，可以提供宝贵的见解。这可以帮助你理解每个框架的优缺点以及它们如何与你的开发风格和项目需求相匹配。

公开构建。

由 Shawn Wang（*@swyx*）推广，保持最新的最佳方式可能就是公开构建。这意味着与社区分享你的工作、想法和观点。可以简单地在社交媒体上发布关于你工作的内容，也可以写一篇博客或制作一个 YouTube 视频。通过分享你的工作，你可以从社区中获得反馈，这有助于提高你的技能并深入了解你正在使用的工具。

写书对我来说是学习 React 的一种很好的方式。我从社区学到了很多东西，也能够与他人分享我的知识。我强烈推荐这样做！

结束时，请记住，学习 React 不仅仅是掌握一个库；它是接纳一种思维方式的过程。这种以组件驱动开发、性能优化和持续适应 Web 不断变化需求为核心的思维方式。

Web 开发的未来光明无限，React 及其社区无疑将在塑造中发挥重要作用。无论您是经验丰富的开发者还是刚刚起步的人，您从本书中获得的技能和知识将在您继续在广阔而令人兴奋的 Web 开发领域中追求过程中发挥重要作用。

祝愿使用 React 构建更直观、高性能和用户中心的应用程序。为未来干杯，感谢您成为这一冒险的一部分！
