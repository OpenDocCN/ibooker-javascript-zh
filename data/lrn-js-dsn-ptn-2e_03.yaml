- en: Chapter 3\. Structuring and Writing Patterns
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第三章。结构化和编写模式
- en: The success of a new idea depends on its utility and also on how you present
    it to those it is trying to help. For developers to understand and adopt a design
    pattern, it should be presented with relevant information about the context, circumstances,
    prerequisites, and significant examples. This chapter applies to those trying
    to understand a specific pattern and those trying to introduce a new one because
    it provides essential information on how patterns are structured and written.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 新想法的成功取决于其效用以及您向试图帮助的人们展示它的方式。开发人员要理解和采用设计模式，必须提供有关上下文、情况、先决条件和重要示例的相关信息。本章适用于试图理解特定模式的人以及试图引入新模式的人，因为它提供了有关模式如何结构化和编写的基本信息。
- en: The Structure of a Design Pattern
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设计模式的结构
- en: Pattern authors would be unable to successfully create and publish a pattern
    if they cannot define its purpose. Similarly, developers will find understanding
    or implementing a pattern challenging if they do not have a background or context.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 如果模式作者无法定义其目的，他们将无法成功创建和发布模式。同样，如果开发人员没有背景或上下文，理解或实现模式将是具有挑战性的。
- en: 'Pattern authors must outline a new pattern’s design, implementation, and purpose.
    Authors initially present a new pattern in the form of a *rule* that establishes
    a relationship between:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 模式作者必须概述新模式的设计、实现和目的。作者最初以建立关系的*规则*形式呈现新模式，关系是：
- en: A context
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个背景
- en: A system of forces that arises in that context
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在这个背景中产生的一套力量系统
- en: A configuration that allows these forces to resolve themselves in context
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许这些力量在上下文中解决的配置
- en: 'With this in mind, let’s now summarize the component elements for a design
    pattern. A design pattern should have the following, with the first five elements
    being the most important:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这些，现在让我们总结设计模式的组成要素。设计模式应具有以下元素，其中前五个元素最为重要：
- en: Pattern name
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 模式名称
- en: A unique name representative of the purpose of the pattern.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 代表模式目的的唯一名称。
- en: Description
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 描述
- en: A brief description of what the pattern helps achieve.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 模式帮助实现的简要描述。
- en: Context outline
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 背景概述
- en: The contexts in which the pattern effectively responds to its users’ needs.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 模式有效响应其用户需求的背景。
- en: Problem statement
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 问题陈述
- en: A statement of the problem addressed so that we understand the pattern’s intent.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 解释模式意图的问题陈述。
- en: Solution
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 解决方案
- en: A description of how the user’s problem is solved in an understandable list
    of steps and perceptions.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 描述用户问题如何通过一系列步骤和感知解决的说明清单。
- en: Design
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 设计
- en: A description of the pattern’s design and, in particular, the user’s behavior
    in interacting with it.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 模式设计的描述，特别是用户与之交互时的行为。
- en: Implementation
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 实施
- en: A guide to how developers would implement the pattern.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 开发人员如何实现该模式的指南。
- en: Illustrations
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 插图
- en: Visual representations of classes in the pattern (e.g., a diagram).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 模式中类的视觉表示（例如，图表）。
- en: Examples
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 示例
- en: Implementations of the pattern in a minimal form.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 模式在最小形式下的实现。
- en: Corequisites
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 共需条件
- en: What other patterns may be needed to support the use of the pattern being described?
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 支持正在描述的模式使用可能需要什么其他模式？
- en: Relations
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 关系
- en: What patterns does this pattern resemble? Does it closely mimic any others?
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 这种模式与哪些模式类似？是否与其他模式非常相似？
- en: Known usage
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 已知用途
- en: Is the pattern being used in the wild? If so, where and how?
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 该模式是否在实际中使用？如果是，是在哪里和如何使用？
- en: Discussions
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 讨论
- en: The team’s or author’s thoughts on the exciting benefits of the pattern.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 团队或作者对模式激动人心的好处的思考。
- en: Well-Written Patterns
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 优秀的模式
- en: Understanding the structure and purpose of a design pattern can help us gain
    a deeper appreciation for the reasoning behind why a pattern is needed. It also
    helps us evaluate the pattern for our own needs.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 理解设计模式的结构和目的可以帮助我们更深入地理解为何需要该模式的推理。它还帮助我们评估我们自己需求的模式。
- en: A good pattern should ideally provide a substantial quantity of reference material
    for end users. Patterns should also provide evidence of why they are necessary.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 一个好的模式理想情况下应为最终用户提供大量参考资料。模式还应提供为何必要的证据。
- en: Just having an overview of a pattern is not enough to help us identify them
    in the code we may encounter day-to-day. It’s not always clear if a piece of code
    we’re looking at follows a set pattern or accidentally resembles one.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 仅仅了解一个模式的概述并不足以帮助我们在日常可能遇到的代码中识别它们。我们不总是清楚我们正在查看的代码是否遵循一组模式或偶然类似于其中一个。
- en: If you suspect that the code you see uses a pattern, consider writing down some
    aspects of the code that fall under a particular existing pattern or set of patterns.
    It may be that the code follows sound principles and design practices that coincidentally
    overlap with the rules for a specific pattern.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你怀疑你看到的代码使用了某种模式，请考虑写下一些代码中属于特定现有模式或一组模式的一些方面。也许代码遵循了与特定模式规则巧合重叠的良好原则和设计实践。
- en: Tip
  id: totrans-40
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 提示
- en: Solutions in which neither interactions nor defined rules appear are not patterns.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在其中既没有交互也没有定义规则的解决方案不是模式。
- en: Although patterns may have a high initial cost in the planning and write-up
    phases, the value returned from that investment can be worth it. Patterns are
    valuable because they help to get all the developers in an organization or team
    on the same page when creating or maintaining solutions. If you’re considering
    working on a pattern of your own, research beforehand, as you may find it more
    beneficial to use or extend existing, proven patterns rather than starting afresh.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管模式在规划和撰写阶段可能具有较高的初始成本，但从该投资中获得的价值可能是值得的。模式有价值，因为它们有助于在组织或团队中的所有开发人员在创建或维护解决方案时保持一致。如果您考虑要自己开发一个模式，请事先进行研究，因为您可能会发现使用或扩展现有的经过验证的模式比从头开始更有益。
- en: Writing a Pattern
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 撰写模式
- en: If you’re trying to develop a design pattern yourself, I recommend learning
    from others who have already been through the process and done it well. Spend
    time absorbing the information from several different design pattern descriptions
    and take in what’s meaningful to you. Explore structure and semantics—you can
    do this by examining the interactions and context of the patterns you’re interested
    in to identify the principles that assist in organizing those patterns together
    in valuable configurations.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您试图自己开发设计模式，我建议向那些已经经历并做得很好的人学习。花时间吸收来自几种不同设计模式描述的信息，并吸收对您有意义的内容。探索结构和语义——您可以通过检查您感兴趣的模式的交互和上下文来做到这一点，以识别有助于将这些模式组织在有价值的配置中的原则。
- en: You can utilize the *existing* format to write your own pattern or see if there
    are ways to improve it by integrating your ideas. An example of a developer who
    did this in recent years is Christian Heilmann, who took the existing *Module*
    pattern (see [Figure 7-2](ch07.xhtml#module)) and made some fundamentally valuable
    changes to it to create the *Revealing Module* pattern (see [“The Revealing Module
    Pattern”](ch07.xhtml#the-revealing-module-pattern)).
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以利用*现有*格式编写自己的模式，或者看看是否有改进的方法，通过整合您的想法。近年来做到这一点的开发人员的一个例子是克里斯蒂安·海尔曼（Christian
    Heilmann），他采用了现有的*模块*模式（参见[图7-2](ch07.xhtml#module)）并对其进行了一些根本有价值的改变，以创建*揭示模块*模式（参见[“揭示模块模式”](ch07.xhtml#the-revealing-module-pattern)）。
- en: 'Adhering to the following checklist would help if you’re interested in creating
    a new design pattern or adapting an existing one:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 遵循以下清单将有助于您如果有兴趣创建新的设计模式或调整现有模式：
- en: How practical is the pattern?
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 这种模式有多实用？
- en: Ensure that the pattern describes proven solutions to recurring problems rather
    than just speculative solutions that haven’t been qualified.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 确保模式描述的是经过验证的解决方案，而不仅仅是尚未经过验证的推测性解决方案。
- en: Keep best practices in mind.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 牢记最佳实践。
- en: Our design decisions should be based on principles we derive from understanding
    best practices.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的设计决策应基于我们从理解最佳实践中得出的原则。
- en: Our design patterns should be transparent to the user.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的设计模式应对用户透明。
- en: Design patterns should be entirely transparent to the end-user experience. They
    primarily serve the developers using them and should not force changes to the
    expected user experience.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 设计模式应该对最终用户体验完全透明。它们主要为使用它们的开发人员提供服务，不应强制改变预期的用户体验。
- en: Remember that originality is *not* key in pattern design.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，在模式设计中，原创性*不是*关键。
- en: When writing a pattern, you do not need to be the original discoverer of the
    documented solutions, nor do you have to worry about your design overlapping with
    minor pieces of other patterns. If the approach is strong enough to be broadly
    applicable, it has a chance of being recognized as a valid pattern.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写模式时，你无需成为记录解决方案的原始发现者，也不必担心你的设计与其他模式的次要部分重叠。如果这种方法足够强大，可以广泛应用，那么它有可能被认可为有效的模式。
- en: Patterns need a strong set of examples.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 模式需要一个强大的示例集。
- en: A good pattern description needs to be followed by an equally effective set
    of examples demonstrating the successful application of the pattern. To show broad
    usage, examples that exhibit sound design principles are ideal.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 一个好的模式描述需要跟随同样有效的示例集，展示模式成功应用的例子。为了展示广泛的使用，展现出良好设计原则的例子是理想的选择。
- en: Pattern writing is a careful balance between creating a design that is general,
    specific, and, above all, useful. Try to ensure that you comprehensively cover
    all possible application areas when writing a pattern.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 撰写模式是在创建通用、具体且最重要的是有用的设计之间进行谨慎平衡。在撰写模式时，尽量确保全面覆盖所有可能的应用领域。
- en: Whether you write a pattern or not, I hope this brief introduction to writing
    patterns has given you some insights that will assist your learning process and
    help you rationalize the patterns covered in the following sections of this book.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你是否撰写模式，我希望这个对模式撰写的简要介绍能够为你提供一些见解，帮助你理解本书后续章节涵盖的模式。
- en: Summary
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: This chapter painted a picture of the ideal “good” pattern. It is equally important
    to understand that “bad” patterns exist, too, so we can identify and avoid them.
    And that is why we have the next chapter about “anti-patterns.”
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 本章描绘了理想的“好”模式的图景。同样重要的是要理解，“坏”模式也存在，因此我们需要识别并避免它们。这就是为什么我们要在下一章讨论“反模式”的原因。
